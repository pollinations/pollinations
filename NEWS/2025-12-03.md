# Weekly Update - 2025-12-03

- **Remove dangerous migration that led to API key deletion** ‚Äî Removes a migration that was causing unintended API key deletions from the database. [PR #5610](https://github.com/pollinations/pollinations/pull/5610)

- **Seedream fallback and dimension scaling** ‚Äî Add automatic fallback from Seedream 4.5 ‚Üí 4.0 on rate limits (429) or server errors (5xx). Auto-scale dimensions to meet Seedream's minimum 1920x1920 pixel requirement. Fix test authentication by adding `x-enter-token` header support. [PR #5609](https://github.com/pollinations/pollinations/pull/5609)

- **Fix Telegram CDN MIME detection for I2I** ‚Äî Resolve issue where Telegram CDN returns `application/octet-stream` instead of `image/jpeg`. Use `file-type` library to detect image type from magic bytes, fixing seedream/seedance image-to-image with Telegram URLs. [PR #5606](https://github.com/pollinations/pollinations/pull/5606)

- **Add Synapse to chat projects** ‚Äî Adds **Synapse** to the chat projects showcase. [PR #5603](https://github.com/pollinations/pollinations/pull/5603)

- **Upgrade Seedream to 4.5 and Seedance to Pro-Fast** ‚Äî Upgrades ByteDance ARK models: Seedream 4.0 ‚Üí 4.5 with increased max reference images (10 ‚Üí 14), default size (1024 ‚Üí 2048, supports up to 4K), and new prompt optimization modes (`standard`/`fast`). Seedance Lite ‚Üí Pro-Fast with simplified single model ID for both T2V and I2V. [PR #5597](https://github.com/pollinations/pollinations/pull/5597)

- **Add Aqua Application Programming Interface to vibeCoding** ‚Äî Adds **Aqua Application Programming Interface** to vibeCoding projects. [PR #5589](https://github.com/pollinations/pollinations/pull/5589)

- **Add Noir Ink Tattoo Studio to chat projects** ‚Äî Adds **Noir Ink Tattoo Studio** to chat projects featuring AI-powered tattoo design generation, booking system, and educational resources. [PR #5587](https://github.com/pollinations/pollinations/pull/5587)

- **Add payment delay notice and improve dashboard styling** ‚Äî Add purchase info box with beta double pollen and 1-2 minute delay notice. Update balance section to use `violet-50/30` background. Add Featured App link to tier-explanation pointing to app submission form. Standardize warning banner styling across components. [PR #5586](https://github.com/pollinations/pollinations/pull/5586)

- **Fix Chat.pollinations.ai problems with thinking** ‚Äî Fixes response handling issues related to thinking/reasoning in the chat interface. [PR #5579](https://github.com/pollinations/pollinations/pull/5579)

- **Add AI-powered project submission review workflow** ‚Äî Add `ai-review-apps.yml` workflow where Claude reviews submissions and creates PRs or requests info. Add `apps-pr-merged.yml` for celebration and `app:approved` label on merge. Update issue template with `app:review` label, fix category emojis, add language field. Implement 4-label tier system (`app:review`, `app:info-needed`, `app:approved`, `app:denied`). [PR #5577](https://github.com/pollinations/pollinations/pull/5577)

- **Add web search icon for Perplexity and Gemini Search models** ‚Äî Add `search` capability to `ServiceDefinition` and `ModelInfo` types. Add `search: true` to `gemini-search`, `perplexity-fast`, `perplexity-reasoning` models. Add `hasSearch()` helper and üîç icon display in pricing table. Update model descriptions to mention web search capability. [PR #5575](https://github.com/pollinations/pollinations/pull/5575)

- **Refine tier UI with explanation panel and styling updates** ‚Äî Add **TierExplanation** component showing tier progression (Spore ‚Üí Seed ‚Üí Flower ‚Üí Nectar) with pollen values and requirements. Nest TierExplanation inside TierPanel. Refine news banner with cleaner white/transparent background. Update beta notice with purple/indigo gradient styling. Clean up unused code (`TIER_ORDER`, `capitalize` function, `target_tier` prop). [PR #5573](https://github.com/pollinations/pollinations/pull/5573)

- **Fix streaming integration tests** ‚Äî Fix streaming integration tests by making `minBatchSize` configurable. Add checks for correct event creation to non-streaming tests. Add missing snapshot for `openai-fast` model. [PR #5572](https://github.com/pollinations/pollinations/pull/5572)

- **Remove invalid migration from fix branch** ‚Äî Removes a now-invalid migration that was forgotten in the `fix/regenerate-latest-migrations-to-fix-snapshots` branch. [PR #5571](https://github.com/pollinations/pollinations/pull/5571)

- **Regenerate latest migrations from schema changes** ‚Äî Regenerate migrations properly via `npm run gen:migrations` to fix incorrectly created snapshots. Remove `error_details` and `error_stack` columns. Add `token_price_completion_video_seconds` and `token_count_completion_video_seconds` columns. [PR #5570](https://github.com/pollinations/pollinations/pull/5570)

- **Video API - I2V model, duration param + OpenAPI docs** ‚Äî Fix seedance image-to-video by using correct I2V model ID (`seedance-1-0-lite-i2v-250428` when image provided, `seedance-1-0-lite-t2v-250428` for text-only). Simplify duration parameter to thin proxy approach. Add OpenAPI documentation for image/video endpoint. [PR #5565](https://github.com/pollinations/pollinations/pull/5565)

- **Add voting status diagram skill and Discord config** ‚Äî Add `.claude/skills/voting-status/SKILL.md` for generating ASCII voting diagrams. Add `.windsurf/workflows/update-voting-status.md` workflow. Add Discord guild ID and channel configs to `AGENTS.md` (channels: chat, pollen-beta, news-polls). [PR #5559](https://github.com/pollinations/pollinations/pull/5559)

- **Chat.Pollinations.AI Update with Video Generation and Tutorial** ‚Äî Add video generation support to chat application. Add comprehensive tutorial for new users. Add chart rendering with `chart.js` and `react-chartjs-2` dependencies. Enhance session and model selection controls. Implement branch cleanup for repository maintainers. [PR #5553](https://github.com/pollinations/pollinations/pull/5553)

- **Add news banner for December 2025 update** ‚Äî Add closable news banner component showing pollen rebalance (ü¶†1 üå±3 üå∏10 üçØ20) and new models (Claude Opus 4.5, Kimi K2, Seedream 4, Veo 3.1, Seedance). Display on dashboard and sign-in pages. Dismissal persists via localStorage. [PR #5545](https://github.com/pollinations/pollinations/pull/5545)

- **Add login provider voting issue + update tier pollen values** ‚Äî Add voting issue #5543 for login providers (Google, Discord, Email, Phone, WeChat, Wallet). Add subtle "more options?" link under GitHub login button. Update tier-management skill with correct pollen values (1/3/10/20). Add upgrade paths section to tier skill. [PR #5544](https://github.com/pollinations/pollinations/pull/5544)

- **Chat.Pollinations.AI Website Code SYNC** ‚Äî Synchronizes files for chat.pollinations.ai from the separate repository. [PR #5536](https://github.com/pollinations/pollinations/pull/5536)

- **Add tests for updated event processing** ‚Äî Add tests ensuring: events not processed if count below `minBatchSize` and recent; events processed if count meets threshold; events processed if older than 30 seconds even if below threshold; expired sent events cleared after processing. [PR #5534](https://github.com/pollinations/pollinations/pull/5534)

- **Correct ReThink AI URL** ‚Äî Fix ReThink AI URL from `rethink.co.id` to `rethink.web.id`. [PR #5512](https://github.com/pollinations/pollinations/pull/5512)

- **Add max-tokens limit for Llama 3.1 8B (mistral-fast)** ‚Äî Fix Bedrock `ValidationException` for `mistral-fast` model where default `max_tokens` exceeded Llama 3.1 8B limit of 8192. Set explicit 4096 limit in `modelConfigs.ts`. [PR #5503](https://github.com/pollinations/pollinations/pull/5503)

- **Add ViralFlow AI to creative projects** ‚Äî Adds ViralFlow AI video generator to creative projects showcase. Uses Pollinations.ai for image generation. [PR #5502](https://github.com/pollinations/pollinations/pull/5502)

- **Improve PDF-to-Speech project description** ‚Äî Enhanced description for PDF-to-Speech project in showcase. [PR #5501](https://github.com/pollinations/pollinations/pull/5501)

- **Improve AI Stickers Generator description** ‚Äî Enhanced description for AI Stickers Generator project in showcase. [PR #5500](https://github.com/pollinations/pollinations/pull/5500)

- **Improve Pollinations Gallery description** ‚Äî Enhanced description for Pollinations Gallery project in showcase. [PR #5499](https://github.com/pollinations/pollinations/pull/5499)

- **Improve LINE Blessing Images Bot description** ‚Äî Enhanced description for LINE Blessing Images Bot project in showcase. [PR #5498](https://github.com/pollinations/pollinations/pull/5498)

- **Improve GPTAI.host project description** ‚Äî Enhanced description for GPTAI.host project in showcase. [PR #5497](https://github.com/pollinations/pollinations/pull/5497)

- **Improve ReThink AI project description** ‚Äî Enhanced description for ReThink AI project in showcase. [PR #5496](https://github.com/pollinations/pollinations/pull/5496)

- **Improve Samaritan AI project description** ‚Äî Enhanced description for Samaritan AI project in showcase. [PR #5495](https://github.com/pollinations/pollinations/pull/5495)

- **Improve Fikiri Chat AI project description** ‚Äî Enhanced description for Fikiri Chat AI project in showcase. [PR #5494](https://github.com/pollinations/pollinations/pull/5494)

- **Improve Prompt Vision project description** ‚Äî Enhanced description for Prompt Vision project in showcase. [PR #5493](https://github.com/pollinations/pollinations/pull/5493)

- **Improve xibe-chat-cli project description** ‚Äî Enhanced description highlighting PyPI availability and terminal-based features for xibe-chat-cli. [PR #5492](https://github.com/pollinations/pollinations/pull/5492)

- **Add 13 community projects to showcase** ‚Äî Add 13 new community projects from open APPS submissions including: Chat (Xibe-chat-cli, Fikiri Chat AI, PollinationsFreeAI, Samaritan AI, ReThink AI üáÆüá©), Creative (Prompt Vision, Pollinations Gallery, AI Stickers Generator, StickerHub), and more. [PR #5491](https://github.com/pollinations/pollinations/pull/5491)

- **Add tier management + issue-maker Claude skills** ‚Äî Add `tier-management` Claude skill for evaluating and updating user tiers. Add `issue-maker` Claude skill for GitHub issue creation. Add `user update-tier` command to `manage-polar.ts`. Add helper scripts: `update-tier.sh`, `fetch-stargazers.sh`, `batch-evaluate.sh`. Fix subscription active status check and remove dead code. [PR #5484](https://github.com/pollinations/pollinations/pull/5484)

- **Fix Tier panel showing "Unknown Tier" and "0 pollen/day"** ‚Äî Fix tier panel displaying incorrect values despite active subscription. Root cause: `polar` import was the Hono middleware, not the Polar SDK client, causing `polar.products.get()` to silently fail. Fix: use `c.var.polar.client.products.get()` instead. [PR #5483](https://github.com/pollinations/pollinations/pull/5483)

- **Remove error blobs to fix D1 SQLITE_NOMEM errors** ‚Äî Fix frequent `SQLITE_NOMEM` errors under load caused by large `error_stack` and `error_details` TEXT columns (10KB+ stack traces). Remove these columns from event table. Error info still logged via wrangler tail. Tinybird uses `DEFAULT 'undefined'` for missing fields. [PR #5480](https://github.com/pollinations/pollinations/pull/5480)

- **Ensure finish_reason accepts any string value and log wrong Zod values** ‚Äî Add clarifying comments that `finish_reason` accepts any string (stop, length, error, max_tokens, etc.). Add `reportInput: true` to Zod parse so errors show the actual invalid value in logs. [PR #5479](https://github.com/pollinations/pollinations/pull/5479)

- **Use cached Polar API calls to prevent rate limiting** ‚Äî Fix Polar API rate limiting (429 errors) by using cached functions. Update `routes/polar.ts` and `routes/tiers.ts` to use cached `getCustomerState()` instead of direct `polar.customers.getStateExternal()` calls. Remove unused `polar` client variable. [PR #5477](https://github.com/pollinations/pollinations/pull/5477)

- **Add resolve.dedupe for Zod to fix CI build** ‚Äî Add `resolve.dedupe: ["zod"]` to `vite.config.ts` to fix CI build failure when importing from `shared/registry/model-info.ts`. [PR #5476](https://github.com/pollinations/pollinations/pull/5476)

- **Clear buffered events after one day** ‚Äî Clear successfully sent events from D1 buffer after one day. Improve batching to only send if minimum pending events OR events older than 30 seconds. Reverts complex local balance tracking from #5453 in favor of simpler approach. [PR #5473](https://github.com/pollinations/pollinations/pull/5473)

- **Add PolliPalmTop to Chat projects** ‚Äî Adds PolliPalmTop üì± Android app to Chat category featuring AI chat, web search, and image generation. APK available at `https://aiworld.institute/server/pollipalmtopv1.apk`. [PR #5471](https://github.com/pollinations/pollinations/pull/5471)

- **Update branding to community-built messaging** ‚Äî Shift Pollinations messaging from "free, no API key" to "community-built, open, supporter-funded". Update README.md, APIDOCS.md, `copywrite.js` LLM prompts, `seo.js` description, Terms.jsx footer, integration-guide.md, and POLLEN_FAQ.md. [PR #5467](https://github.com/pollinations/pollinations/pull/5467)

- **Fix error status propagation and Azure max_tokens** ‚Äî Fix streaming errors returning HTTP 500 instead of upstream status (400, 401, etc.). Use `error.status` before `error.code` in `generateTextBasedOnModel`. Fix `errorTypes[statusCode]` ‚Üí `errorTypes[responseStatus]` lookup. Convert `max_tokens` ‚Üí `max_completion_tokens` for Azure OpenAI models. [PR #5460](https://github.com/pollinations/pollinations/pull/5460)

- **Add tier-evaluator Claude skill** ‚Äî Add Claude skill for automated user tier evaluation. Checks: üå∏ Flower (GitHub contributor OR project in lists), üå± Seed (issue/PR involvement OR starred repo OR payment), üçÑ Spore (default). Includes `fetch-stargazers.sh` for cached stargazer lookup (3k+ users). [PR #5457](https://github.com/pollinations/pollinations/pull/5457)

- **Relax OpenAI schema for multi-provider compatibility** ‚Äî Allow array content for system, developer, assistant, tool messages (not just user). Add `cache_control` support for Anthropic prompt caching. Add file content type for document uploads. Add passthrough for unknown content types. Make response `index`/`message` optional for non-OpenAI providers. [PR #5456](https://github.com/pollinations/pollinations/pull/5456)

- **Enable 4K resolution support for nanobanana-pro** ‚Äî Add `imageConfig` with `aspectRatio` and `imageSize` to Vertex AI API calls. Auto-detect `imageSize` (1K/2K/4K) based on requested pixel count. Calculate closest standard aspect ratio from width/height. Increase nanobanana-pro default from 1024 to 2048 pixels. [PR #5454](https://github.com/pollinations/pollinations/pull/5454)

- **Local balance tracking to reduce Polar API rate limits** ‚Äî Store meter balances locally in KV (5min TTL) to reduce Polar API calls. Only sync with Polar on cache miss or when balance ‚â§ 0.1. Decrement balance locally after billable requests. Add balance tracking tests. [PR #5453](https://github.com/pollinations/pollinations/pull/5453)

- **Fix image service health check endpoint** ‚Äî Updated the enter-services deploy workflow to use `/about` endpoint instead of `/openai/models` for image service health checks. The image service doesn't have `/openai/models` and `/models` returns HTTP 410 (deprecated), causing deploy failures. [PR #5447](https://github.com/pollinations/pollinations/pull/5447)

- **Fix Cloudflare Worker deployment configuration** ‚Äî Removed `--env production` flag from wrangler deploy commands for enter.pollinations.ai and enter-services. Wrangler 4.50+ with Vite plugin uses redirected configuration where the `--env` flag conflicts with Vite's `CLOUDFLARE_ENV` approach, causing deployments to fail since Nov 26. [PR #5446](https://github.com/pollinations/pollinations/pull/5446)

- **Add Portkey gateway deployment automation** ‚Äî Added automated deployment for Portkey API gateway including `text.pollinations.ai/scripts/deploy-portkey.sh` script, GitHub Actions workflow with manual trigger, and `npm run deploy:portkey` script. Pinned to commit `9d9a37a` (v1.14.3), overridable via `PORTKEY_COMMIT` and `PORTKEY_ENV` env vars. [PR #5442](https://github.com/pollinations/pollinations/pull/5442)

- **Relax OpenAI schema validation for multi-provider compatibility** ‚Äî Changed `finish_reason` from enum to string to accept any provider value (Gemini returns `MAX_TOKENS`, `SAFETY`, `RECITATION` etc.), and changed `message.content` from nullable to nullish to accept undefined for truncated responses. [PR #5439](https://github.com/pollinations/pollinations/pull/5439)

- **Fix secret decryption oversights** ‚Äî Fixed oversights with secret decryption implementation. [PR #5436](https://github.com/pollinations/pollinations/pull/5436)

- **Add video generation with Veo and Seedance models** ‚Äî Added text-to-video and image-to-video support using Google Veo ($0.15/sec) and BytePlus Seedance ($0.028/sec). Includes per-second billing for video models and video pricing UI in enter.pollinations.ai. Usage: `GET /prompt/dragon%20flying?model=veo` or `?model=seedance`. Models marked as preview. [PR #5434](https://github.com/pollinations/pollinations/pull/5434)

- **Organize secrets and use JSON format** ‚Äî Migrated encrypted secrets to JSON files stored in `**/secrets/*.json` and updated npm scripts and GitHub Actions to match the new location. [PR #5433](https://github.com/pollinations/pollinations/pull/5433)

- **Add 3 community project submissions** ‚Äî Added SRT Translator CLI (Python subtitle translator) to creative, VisionText VS Code Extension to hackAndBuild, and TeleChars AI (Spanish Telegram bot platform) to socialBots. [PR #5432](https://github.com/pollinations/pollinations/pull/5432)

- **Update tier pollen amounts** ‚Äî Added new Spore tier with 1 pollen/day, reduced Seed from 10 to 3 pollen/day, reduced Flower from 15 to 10 pollen/day, Nectar unchanged at 20 pollen/day. [PR #5431](https://github.com/pollinations/pollinations/pull/5431)

- **Add Nano Banana Pro image model** ‚Äî Added `nanobanana-pro` model using `gemini-3-pro-image-preview` with support for 4K resolution and built-in "Thinking" process. Made Vertex AI model ID configurable in vertexAIClient. Same API as nanobanana with different model ID. [PR #5427](https://github.com/pollinations/pollinations/pull/5427)

- **Add Claude Opus 4.5 and default max_tokens for Bedrock** ‚Äî Added `claude-xlarge` model (Claude Opus 4.5) and implemented `defaultOptions` mechanism in modelResolver for provider defaults. Set default `max_tokens: 16384` for Bedrock Lambda/Fargate models (was 2048). Filters undefined values when merging options to preserve defaults. [PR #5426](https://github.com/pollinations/pollinations/pull/5426)

- **Refactor model aliases into separate file** ‚Äî Extracted model aliases into a separate file, simplified type definitions, and standardized to use consistent casing throughout. [PR #5375](https://github.com/pollinations/pollinations/pull/5375)
