version: '3.8'

services:
  z-image:
    build: .
    runtime: nvidia
    ports:
      - "9000:9000"
    volumes:
      - model_cache:/app/model_cache
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - CUDA_VISIBLE_DEVICES=0
    command: python api/app.py

volumes:
  model_cache:
    driver: local