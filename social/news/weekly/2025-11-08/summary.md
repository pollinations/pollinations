# Weekly Update - 2025-11-08

- **Add root package.json for multi-service development** — Adds root `package.json` with `concurrently` to run multiple services. Includes scripts (`dev`, `dev:enter`, `install:all`) and updates `DEVELOP.md` with multi-service workflows and auto-colored output. [PR #5120](https://github.com/pollinations/pollinations/pull/5120)
- **Improve button consistency and standardize API Reference naming** — Renames 'API Docs' to 'API Reference' globally. Standardizes button order (auth left, reference right), colors (amber sign-in, black reference, green GitHub), and visual consistency across sign-in and dashboard pages. [PR #5118](https://github.com/pollinations/pollinations/pull/5118)
- **Improve Reference Images UI in image editor** — Repositions Reference Images section between prompt and model selector. Standardizes styling, increases thumbnail size to 120px, and updates add/remove button visuals for better visibility. [PR #5116](https://github.com/pollinations/pollinations/pull/5116)
- **Disable ad system globally in text.pollinations.ai** — Adds `ADS_GLOBALLY_DISABLED` flag to ad modules and implements early returns in `shouldShowAds()` and `generateAdForContent()` to eliminate ad processing overhead. [PR #5113](https://github.com/pollinations/pollinations/pull/5113)
- **Fix Vision model ZodError on image_url content** — Resolves `ZodError` by removing conflicting `.default("auto")` validator while keeping `.optional()` for the `detail` field in `openai.ts`. [PR #5105](https://github.com/pollinations/pollinations/pull/5105)
- **Add Cloudflare deployment workflow for enter.pollinations.ai** — Adds workflow triggering on `staging` branch pushes to `enter.pollinations.ai/**`. Uses `npm run deploy:staging` with build steps. [PR #5102](https://github.com/pollinations/pollinations/pull/5102)
- **Add Cloudflare deployment workflow for enter.pollinations.ai** — Adds dedicated workflow for deploying `enter.pollinations.ai` to Cloudflare Workers on staging branch pushes. [PR #5101](https://github.com/pollinations/pollinations/pull/5101)
- **Update product ids** — Updates product identifiers in the configuration. [PR #5098](https://github.com/pollinations/pollinations/pull/5098)
- **Add persistent storage to PollenRateLimiter Durable Object** — Enables rate limiter state (`currentFill`, `lastUpdateTime`) to persist after eviction/restart. Adds comprehensive logging and removes duplicate config from `env.local`/`env.staging`. [PR #5096](https://github.com/pollinations/pollinations/pull/5096)
- **Remove 25s timeout from nanobanana Vertex AI requests** — Removes hardcoded timeout in `vertexAIClient.ts` to allow image generation (especially with reference images) to complete naturally without premature failure. [PR #5091](https://github.com/pollinations/pollinations/pull/5091)
- **Add missing import for callAzureFluxKontext** — Fixes `callAzureFluxKontext` reference error in `createAndReturnImages.ts` to resolve kontext model image generation issues on master. [PR #5089](https://github.com/pollinations/pollinations/pull/5089)
- **Enhance digest generator for scalability and clarity** — Refactors digest generation to handle large PR volumes via pagination and chunking. Updates prompts for better user-facing summaries. [PR #5087](https://github.com/pollinations/pollinations/pull/5087)
- **Fix rate limit threshold consistency** — Removes hardcoded `0.001` threshold in favor of `0`. Splits error responses for concurrent requests vs. exhausted limits, and cleans up API by making `waitMs` optional. [PR #5085](https://github.com/pollinations/pollinations/pull/5085)
- **Enable payment button for credit card testing** — Updates payment buttons and enables Polar checkout integration. Wires up `pollen-bundle-small` product for testing while keeping other tiers disabled. [PR #5084](https://github.com/pollinations/pollinations/pull/5084)
- **Add missing import for callAzureFluxKontext** — Resolves "callAzureFluxKontext is not defined" error in `createAndReturnImages.ts` affecting kontext model generation. [PR #5083](https://github.com/pollinations/pollinations/pull/5083)
- **Update frontend config with new meter ids** — Updates the frontend configuration to utilize new meter identifiers. [PR #5080](https://github.com/pollinations/pollinations/pull/5080)
- **Add staging migration for PollenRateLimiter** — Deletes old `RateLimiter` class and creates new `PollenRateLimiter` class to fix staging deployment errors. [PR #5079](https://github.com/pollinations/pollinations/pull/5079)
- **Update migrations to match D1 state** — Adjusts migrations to align with how D1 interprets applied changes. [PR #5078](https://github.com/pollinations/pollinations/pull/5078)
- **Show PR creator username in Discord bot** — Updates Discord bot logic to display the username of the PR creator. [PR #5077](https://github.com/pollinations/pollinations/pull/5077)
- **Pollen-based rate limiter MVP for frontend keys** — Implements `PollenRateLimiter` Durable Object. Features token bucket (0.1 capacity, 1/hr refill), post-request cost deduction, negative balance support, and IP-based abuse prevention. [PR #5076](https://github.com/pollinations/pollinations/pull/5076)
- **Fix PR Creator username patch** — Resolves variable mismatch where merger name was shown instead of creator name in Discord notifications. [PR #5075](https://github.com/pollinations/pollinations/pull/5075)
- **Disable ads by default for text.pollinations.ai** — Sets ad probability to 0%, removes user preference checks, but keeps `p-ads` test marker functional. [PR #5067](https://github.com/pollinations/pollinations/pull/5067)
- **Deploy new IO.net instances and clean up docs** — Removes outdated deployment scripts and docs. Adds `DEPLOYMENT.md` and updates `deploy-ionet-worker.sh` to use fresh venv installation. [PR #5065](https://github.com/pollinations/pollinations/pull/5065)
- **Split pollen balance between tier and pack** — Implements multiple meters with priorities (`Pollen (tier)`: 200, `Pollen (pack)`: 100). Updates `generation_event` to record selected meter ID and slug. [PR #5057](https://github.com/pollinations/pollinations/pull/5057)
- **Move assets to shared folder** — Relocates `/assets` to `/shared/assets` and updates references in `app-configs.js` and `README.md` for better organization. [PR #5055](https://github.com/pollinations/pollinations/pull/5055)
- **Update Terms of Service and Privacy Policies** — Adds commercial TOS/Privacy Policy for `enter.pollinations.ai` and updates community versions for `pollinations.ai`. Clarifies licensing and safety rules. [PR #5054](https://github.com/pollinations/pollinations/pull/5054)
- **Fix broken sign-in** — Simplifies sign-in logic to resolve errors and improve robustness. [PR #5053](https://github.com/pollinations/pollinations/pull/5053)
- **Migrate website to enter.pollinations.ai API** — Updates image generation to `/api/generate/image/` and text models to `/generate/text/models`. Centralizes API key management in `enterApi.js`. [PR #5047](https://github.com/pollinations/pollinations/pull/5047)
- **Add Perplexity AI supporter and fix UI alignment** — Adds Perplexity AI to supporters list. Fixes footer text alignment on mobile and project image alignment on desktop. [PR #5046](https://github.com/pollinations/pollinations/pull/5046)
- **Show both creator and merger name for PRs** — Updates logic to display both the PR creator and the merger in notifications. [PR #5045](https://github.com/pollinations/pollinations/pull/5045)
- **Remove router invalidation race condition causing login loop** — Removes `router.invalidate()` from session changes in `main.tsx` to prevent infinite redirect loops during GitHub OAuth login. [PR #5042](https://github.com/pollinations/pollinations/pull/5042)
- **Fix worker configuration type errors** — Resolves type errors in `worker-configuration.d.ts` and regenerates types to include `RATE_LIMITER`. [PR #5041](https://github.com/pollinations/pollinations/pull/5041)
- **Remove dimension scaling limits from image generation** — Removes `maxSideLength` scaling logic to allow valid dimensions (e.g., 1536x1024) to pass to Azure API without modification. [PR #5038](https://github.com/pollinations/pollinations/pull/5038)
- **Fix Flux steps calculation and concurrent request counting** — Updates step formula to maintain 4 steps up to 20 concurrent requests. Filters inactive servers (>45s heartbeat) from job counts. [PR #5035](https://github.com/pollinations/pollinations/pull/5035)
- **Organize API docs with tags and hide legacy endpoint** — Adds OpenAPI tags for Scalar docs organization. Hides legacy `/openai` endpoint and adds deprecation notice to `/v1/chat/completions`. [PR #5033](https://github.com/pollinations/pollinations/pull/5033)
- **Add OpenAI-compatible endpoint paths** — Renames endpoints to `/api/generate/v1/models` and `/api/generate/v1/chat/completions` for compatibility with OpenAI SDKs and clients. [PR #5032](https://github.com/pollinations/pollinations/pull/5032)
- **Cleanup models and enable Naughty** — Removes `roblox-rp`, `bidara`, `rtist`. Renames `claudyclaude` to `claude`. Enables `naughty` (Mistral Nemo) model with specific pricing. [PR #5030](https://github.com/pollinations/pollinations/pull/5030)
- **Add permissive CORS for public API endpoints** — Adds `origin: '*'` CORS headers to `/api/generate/*` routes to fix frontend blocking issues. [PR #5026](https://github.com/pollinations/pollinations/pull/5026)
- **Fix Terms & Conditions page routing and UI** — Updates footer link to use local `/terms` route, removes redirect, and uses full text logo with home link. [PR #5025](https://github.com/pollinations/pollinations/pull/5025)
- **Update FAQ to align with current API requirements** — Updates `POLLEN_FAQ.md` to reflect registration requirements, remove free model references, and clarify Pollen usage. [PR #5022](https://github.com/pollinations/pollinations/pull/5022)
- **Use correct token count for NanoBanana pricing** — Sets specific token counts (NanoBanana: 1290, gptimage: 765) and fixes rounding logic to ensure correct image/pollen calculations. [PR #5020](https://github.com/pollinations/pollinations/pull/5020)
- **Update API key rate limit info** — Updates UI and docs to reflect actual rate limits: 3 req/burst, 1 refill/15s for publishable keys; no limits for secret keys. [PR #5017](https://github.com/pollinations/pollinations/pull/5017)
- **Move model endpoints before auth to fix CORS** — Moves `/image/models` before auth middleware to make model lists publicly accessible without CORS errors. [PR #5016](https://github.com/pollinations/pollinations/pull/5016)
- **Hide pricing before login** — Removes pricing component from sign-in page; pricing remains visible after login on the main page. [PR #5014](https://github.com/pollinations/pollinations/pull/5014)
- **Fix GET /text/:prompt content types** — Updates endpoint to return plain text for text models and raw audio (MP3) for `openai-audio` instead of JSON. Changes backend request method from POST to GET. [PR #5011](https://github.com/pollinations/pollinations/pull/5011)
- **Simplify header and fix social icon visibility** — Replaces "About Us" button with LinkedIn icon, fixes icon visibility on hover, and standardizes border styling. [PR #5010](https://github.com/pollinations/pollinations/pull/5010)
- **Revert footer redesign** — Restores LLM-based footer and `LLMTextManipulator` components. Reverts commit 3dc33ac29 and brings back MUI-based layout. [PR #5009](https://github.com/pollinations/pollinations/pull/5009)
- **Add PWA watermark logo generation with transparency** — Adds `image.pollinations.ai` config to PWA assets. Generates 200x31 transparent watermark from `logo-text.svg`, fixing previous grayscale issues. [PR #5008](https://github.com/pollinations/pollinations/pull/5008)
- **Fix logo color format** — Reverts `image.pollinations.ai/logo.png` to full color RGBA format to fix grayscale watermark issues on generated images. [PR #5006](https://github.com/pollinations/pollinations/pull/5006)
- **Update discord digest** — Simplifies the overall workflow of the discord digest system. [PR #5005](https://github.com/pollinations/pollinations/pull/5005)
- **Fix staging environment bindings** — Adds missing `RATE_LIMITER` Durable Objects binding to `wrangler.toml` for staging environment to resolve request errors. [PR #5004](https://github.com/pollinations/pollinations/pull/5004)
- **Update branding and terms** — Rebrands enter gateway to "Myceli.AI OÜ" with updated legal info. Updates open source community terms, adds GitHub links, and Discord invite. [PR #5002](https://github.com/pollinations/pollinations/pull/5002)
- **Hacktoberfest Report Readme Update** — Adds a comprehensive Hacktoberfest report to the global README. [PR #5001](https://github.com/pollinations/pollinations/pull/5001)
- **Update weekly digest workflow** — Adds target to weekly update and tests `POLLINATIONS_TOKEN` workflow integration. [PR #5000](https://github.com/pollinations/pollinations/pull/5000)
- **Remove tier gating** — Removes `UserTier` types and tier-based access control. All services now use cost-based pricing without tier restrictions. [PR #4999](https://github.com/pollinations/pollinations/pull/4999)
- **Add pricing table** — Implements comprehensive pricing component with text and image model tables on dashboard and sign-in pages. [PR #4996](https://github.com/pollinations/pollinations/pull/4996)
- **Update Digest scripts** — Migrates Discord Digest scripts and workflows to use `POLLINATIONS_TOKEN` from repository secrets. [PR #4995](https://github.com/pollinations/pollinations/pull/4995)
- **Fix Claude Code Action on forks** — Updates workflow to use PR refs (`refs/pull/{number}/head`) to enable Claude reviews on external contributor PRs. [PR #4992](https://github.com/pollinations/pollinations/pull/4992)
- **Update branch references to main** — Updates GitHub workflows, documentation links, and deployment scripts to reference `main` instead of `master`. [PR #4991](https://github.com/pollinations/pollinations/pull/4991)
- **Centralize API configuration** — Updates API key, removes auth from public endpoints, and centralizes config in `enterApi.js`. [PR #4990](https://github.com/pollinations/pollinations/pull/4990)
- **Fix Perplexity validation** — Updates OpenAI schema to allow empty string for `finish_reason` to support `perplexity-fast` and `perplexity-reasoning` models. [PR #4985](https://github.com/pollinations/pollinations/pull/4985)
- **Add Quick Start documentation** — Adds browser-friendly examples for image/text generation and model lists to `enter.pollinations.ai` docs. [PR #4984](https://github.com/pollinations/pollinations/pull/4984)
- **Discord Digest System Migration** — Migrates digest system to `enter.pollinations.ai/api/generate/openai`, adds twice-weekly schedule, and increases input token limit to 120k. [PR #4979](https://github.com/pollinations/pollinations/pull/4979)
- **Add text models endpoint** — Adds `/api/generate/text/models` endpoint proxying to `text.pollinations.ai/models` for model discovery. [PR #4973](https://github.com/pollinations/pollinations/pull/4973)
- **Migrate frontend to enter gateway** — Updates frontend to use `enter.pollinations.ai` endpoints for image/text generation and models. Adds API key authentication. [PR #4971](https://github.com/pollinations/pollinations/pull/4971)
- **Add Perplexity Sonar models** — Adds `perplexity-fast` ($1/$1) and `perplexity-reasoning` ($1/$5) models with tool support. [PR #4969](https://github.com/pollinations/pollinations/pull/4969)
- **Update API key prefix** — Changes API key prefixes to `plln_pk` (publishable) and `plln_sk` (secret). [PR #4967](https://github.com/pollinations/pollinations/pull/4967)
- **Implement Durable Objects rate limiter** — Replaces KV-based limiter with Cloudflare Durable Objects using a token bucket algorithm (3 tokens, 1 refill/15s) for strong consistency. [PR #4960](https://github.com/pollinations/pollinations/pull/4960)
- **Add error fields to Tinybird events** — Adds `request_path`, `api_key_id`, `resolved_model_requested`, `error_name`, and `error_response_code` to event logging for better context. [PR #4959](https://github.com/pollinations/pollinations/pull/4959)
- **Improve error messaging** — Exposes actual error details (name, stack, cause) to users instead of generic messages. Adds user context to logs. [PR #4956](https://github.com/pollinations/pollinations/pull/4956)
- **Enhance Gemini errors and gptimage aspect ratio** — Returns specific safety block details from Gemini and fixes `gptimage` aspect ratio handling. [PR #4953](https://github.com/pollinations/pollinations/pull/4953)
- **Add minimalist changelog generator web app** — Adds React+Vite app that parses git history and uses Pollinations text API to generate human-readable changelogs. [PR #4951](https://github.com/pollinations/pollinations/pull/4951)
- **Add automated project submission workflow** — Implements GitHub Action to process APPS issues. Automates parsing, categorization, file updates in `AGENTS.md`, and PR creation for new project submissions. [PR #4950](https://github.com/pollinations/pollinations/pull/4950)
- **Enable streaming responses** — Refactors tracking middleware for streaming, adds usage/content filter extraction, and enables `include_usage` for Azure requests. [PR #4942](https://github.com/pollinations/pollinations/pull/4942)
- **Add pollen balance check** — Enforces pre-paid balance validation before proxying requests to paid models to prevent negative balances. [PR #4939](https://github.com/pollinations/pollinations/pull/4939)
- **Add MIDI notifications** — Adds MIDI notification scripts for server monitoring and updates package dependencies. [PR #4935](https://github.com/pollinations/pollinations/pull/4935)
- **Simplify backend services** — Removes tier gating, rate limits, and access control from backend services (delegated to enter gateway). Establishes `main` branch. [PR #4932](https://github.com/pollinations/pollinations/pull/4932)
- **Add audio field to response schema** — Updates `ChatCompletionResponseMessageSchema` to support `audio` field for `openai-audio` model responses. [PR #4923](https://github.com/pollinations/pollinations/pull/4923)
- **Add Flux server monitor** — Adds terminal-based real-time monitor for `/register` endpoint to track server status, load, and errors. [PR #4921](https://github.com/pollinations/pollinations/pull/4921)
- **Unify image token tracking** — Standardizes token tracking to use `completionImageTokens` field across all models (Vertex AI, Azure, etc.). [PR #4920](https://github.com/pollinations/pollinations/pull/4920)
- **Improve IO.NET Flux worker stability** — Reduces max resolution to 768x768 to prevent OOM, adds auto-exit on error, and adds monitoring scripts. [PR #4919](https://github.com/pollinations/pollinations/pull/4919)
- **Improve systemd logging** — Enables journal logging for services and enhances `monitor-logs-beep.sh` with audio alerts for requests and errors. [PR #4900](https://github.com/pollinations/pollinations/pull/4900)
- **Update Footer and Social Links** — Implements Tailwind CSS styling for footer and social link components. [PR #4868](https://github.com/pollinations/pollinations/pull/4868)
